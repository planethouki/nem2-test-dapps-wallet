const helper = require('../../src/assets/utils/helper')

describe('helper', () => {

  const payload = 'BB0000000000000041357A89184452E4AF71B47DA654D84B6B2BD486D2D0E656EE59F97FD4191EC117ACC5ABED543DCF6B8D359FAB6BCBD70BB8517B6EB487F75DD00ADDDD6EDD0DC65B49BA7673BFEC3EFD04DE7EF412A6346F4BA745AAC09649E8CAFE1AC385800000000001985441A0860100000000006E8CFA66020000009814F3DABC922F7B2D06A6AF544B58E5CFA2099C91B0077C0B000100000000003CE19A057E831F0900E40B540200000000386D544575416932746A'

  describe('endian', () => {
    test('gt1byte', () => {
      expect(helper.endian('123456')).toBe('563412')
    })
    test('1byte', () => {
      expect(helper.endian('78')).toBe('78')
    })
  })


  describe('getSigningPayload', () => {
    test('transferTransaction', () => {
      const toBe = '01985441A0860100000000006E8CFA66020000009814F3DABC922F7B2D06A6AF544B58E5CFA2099C91B0077C0B000100000000003CE19A057E831F0900E40B540200000000386D544575416932746A'
      expect(helper.getSigningPayload(payload)).toBe(toBe)
    })
    test('aggregateBondedTransaction', () => {
      const p = "1801000000000000FF6AA114A8A6FD6E15F92CB67C4D674ABC7A17D659310B59A6D7AA3D8C84BCE7EA1D410E27346B62215C771F8506BC87A74EE0698C419FAB1E5042DE44961504DFF2D798CF331CDDEC64FD9F8F565B3A78D3423700955B2EE03BDBD09F01E1710000000001984142400D030000000000B9F219BA020000009C28AF8CA66117FBAAB83387CD63FD2F78AF447C28BD097060C8A6A2565F3D1670000000000000006B00000000000000DFF2D798CF331CDDEC64FD9F8F565B3A78D3423700955B2EE03BDBD09F01E17100000000019854419814F3DABC922F7B2D06A6AF544B58E5CFA2099C91B0077C0B000100000000003CE19A057E831F0900E40B540200000000386D544575416932746A0000000000"
      const toBeWithGenerationHash = "3B5E1FA6445653C971A50687E75E6D09FB30481055E3990C84B25E9222DC115501984142400D030000000000B9F219BA020000009C28AF8CA66117FBAAB83387CD63FD2F78AF447C28BD097060C8A6A2565F3D16"
      const toBe = toBeWithGenerationHash.substr(64)
      expect(helper.getSigningPayload(p)).toBe(toBe)
    })
    test('aggregateCompleteTransaction', () => {
      const p = "1801000000000000D78955A603814A643DB8047E81D2D76A7625126E9F112C6907EDCA54C53926A064554C638C8CAB80F247CF9071B4263EEA79F6D7BF83454328B1D15BE7DC3D0BDFF2D798CF331CDDEC64FD9F8F565B3A78D3423700955B2EE03BDBD09F01E1710000000001984141400D0300000000005F2232BA020000009C28AF8CA66117FBAAB83387CD63FD2F78AF447C28BD097060C8A6A2565F3D1670000000000000006B00000000000000DFF2D798CF331CDDEC64FD9F8F565B3A78D3423700955B2EE03BDBD09F01E17100000000019854419814F3DABC922F7B2D06A6AF544B58E5CFA2099C91B0077C0B000100000000003CE19A057E831F0900E40B540200000000386D544575416932746A0000000000"
      const toBeWithGenerationHash = "3B5E1FA6445653C971A50687E75E6D09FB30481055E3990C84B25E9222DC115501984141400D0300000000005F2232BA020000009C28AF8CA66117FBAAB83387CD63FD2F78AF447C28BD097060C8A6A2565F3D16"
      const toBe = toBeWithGenerationHash.substr(64)
      expect(helper.getSigningPayload(p)).toBe(toBe)
    })
  })

  test('getSizePayload', () => {
    expect(helper.getSizePayload(payload)).toBe('BB000000')
  })

  describe('spliceSignature', () => {
    test('transferTransaction', () => {
      const toBe = 'BB00000000000000ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX0000000001985441A0860100000000006E8CFA66020000009814F3DABC922F7B2D06A6AF544B58E5CFA2099C91B0077C0B000100000000003CE19A057E831F0900E40B540200000000386D544575416932746A'
      expect(helper.spliceSignature(payload, ''.padStart(128, 'Z'), ''.padStart(64, 'X'))).toBe(toBe)
    })
  })

  test('getTransactionType', () => {
    expect(helper.getTransactionType(payload)).toBe(16724)
  })

  test('getNetworkTypeString', () => {
    expect(helper.getNetworkTypeString(104)).toBe('MAIN_NET')
    expect(helper.getNetworkTypeString(152)).toBe('TEST_NET')
    expect(helper.getNetworkTypeString(96)).toBe('MIJIN')
    expect(helper.getNetworkTypeString(144)).toBe('MIJIN_TEST')
    expect(helper.getNetworkTypeString(120)).toBe('PRIVATE')
    expect(helper.getNetworkTypeString(168)).toBe('PRIVATE_TEST')
  })

})
